(()=>{"use strict";var t={29:(t,e,n)=>{function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,{A:()=>o})},284:(t,e,n)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}n.d(e,{A:()=>o})},327:(t,e,n)=>{n.d(e,{A:()=>r});var o=n(284);function r(t,e){if("object"!=(0,o.A)(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=(0,o.A)(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}},399:(t,e,n)=>{n.d(e,{A:()=>i});var o=n(29),r=n(901),a=function(){return(0,r.A)((function t(){(0,o.A)(this,t)}),[{key:"onReady",value:function(){}},{key:"registerEvents",value:function(){}},{key:"initiate",value:function(t){if(t&&!t.includes(salla.config.get("page.slug")))return app.log("The Class For (".concat(t.join(","),") Skipped."));this.onReady(),this.registerEvents(),app.log("The Class For (".concat((null==t?void 0:t.join(","))||"*",") LoadedðŸŽ‰"))}}])}();a.initiateWhenReady=function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;"ready"===(null===(t=window.app)||void 0===t?void 0:t.status)?(new this).initiate(n):document.addEventListener("theme::ready",(function(){return(new e).initiate(n)}))};const i=a},417:(t,e,n)=>{function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,{A:()=>o})},501:(t,e,n)=>{n.d(e,{A:()=>r});var o=n(662);function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&(0,o.A)(t,e)}},662:(t,e,n)=>{function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}n.d(e,{A:()=>o})},822:(t,e,n)=>{n.d(e,{A:()=>a});var o=n(284),r=n(417);function a(t,e){if(e&&("object"==(0,o.A)(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return(0,r.A)(t)}},901:(t,e,n)=>{n.d(e,{A:()=>a});var o=n(922);function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(0,o.A)(r.key),r)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}},922:(t,e,n)=>{n.d(e,{A:()=>a});var o=n(284),r=n(327);function a(t){var e=(0,r.A)(t,"string");return"symbol"==(0,o.A)(e)?e:e+""}},954:(t,e,n)=>{function o(t){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},o(t)}n.d(e,{A:()=>o})}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var a=e[o]={exports:{}};return t[o](a,a.exports,n),a.exports}n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t=n(29),e=n(901),o=n(822),r=n(954),a=n(501);function i(t){if(t){var e=function(){var t=document.createElement("div");t.classList.add("loading-overlay","absolute","inset-0","z-50","flex","justify-center","items-center");var e=document.createElement("div");e.classList.add("absolute","inset-0","bg-white","opacity-40");var n=document.createElement("div");return n.innerHTML='<salla-loading size="32"></salla-loading>',n.classList.add("relative","z-10"),t.appendChild(e),t.appendChild(n),t}(),n=document.querySelector("#item-".concat(t," .cart-item"));n&&n.appendChild(e)}}function l(t){(t?[document.querySelector(".main-content form:not(.cart-options form)#item-".concat(t," .cart-item"))]:document.querySelectorAll(".main-content form:not(.cart-options form) .cart-item")).forEach((function(t){var e=null==t?void 0:t.querySelector(".loading-overlay");e&&setTimeout((function(){return e.remove()}),0)}))}function c(t){var e;return null===(e=t.querySelector('input[type="hidden"][name="id"]'))||void 0===e?void 0:e.value}function u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(u=function(){return!!t})()}(function(n){function p(){return(0,t.A)(this,p),e=this,n=p,a=arguments,n=(0,r.A)(n),(0,o.A)(e,u()?Reflect.construct(n,a||[],(0,r.A)(e).constructor):n.apply(e,a));var e,n,a}return(0,a.A)(p,n),(0,e.A)(p,[{key:"onReady",value:function(){var t,e=this;salla.event.cart.onUpdated((function(t){return e.updateCartPageInfo(t)})),app.watchElements({couponCodeInput:"#coupon-input",couponBtn:"#coupon-btn",couponError:"#coupon-error",subTotal:"#sub-total",orderOptionsTotal:"#cart-options-total",totalDiscount:"#total-discount",taxAmount:"#tax-amount",shippingCost:"#shipping-cost",freeShipping:"#free-shipping",freeShippingBar:"#free-shipping-bar",freeShippingMsg:"#free-shipping-msg",freeShipApplied:"#free-shipping-applied",cartGifting:"#cart-gifting",sallaGifting:"#salla-gifting"}),this.initiateCoupon(),this.initSubmitCart(),(t=document.querySelectorAll(".main-content form:not(.cart-options form)")).length&&(t.forEach((function(t){var e=c(t),n=t.querySelector("salla-product-options"),o=t.querySelector("salla-quantity-input");o&&function(t,e,n){var o=new MutationObserver((function(){var r=t.querySelector('input[name="quantity"]');r&&(o.disconnect(),r.addEventListener("change",(function(t){var o,r;n.reportValidity()&&Number(e)===Number(null===(o=t.detail)||void 0===o?void 0:o.productId)&&i(null===(r=t.detail)||void 0===r?void 0:r.productId)})))}));o.observe(t,{childList:!0,subtree:!0})}(o,e,t),n&&n.addEventListener("changed",(function(n){setTimeout((function(){var o,r,a;t.reportValidity()&&"added"!=(null===(o=n.detail)||void 0===o||null===(o=o.event)||void 0===o?void 0:o.type)&&Number(e)===Number(null===(r=n.detail)||void 0===r?void 0:r.productId)&&i(null===(a=n.detail)||void 0===a?void 0:a.productId)}),100)}))})),salla.cart.event.onItemUpdated((function(t,e){l(e)})),salla.cart.event.onItemUpdatedFailed((function(e,n){!function(t,e){salla.api.cart.getCurrentCartId(!1,"salla-product-options").then((function(t){return salla.cart.details(t,["options"])})).then((function(n){var o=n.data.cart.items.find((function(e){return Number(e.id)===Number(t)}));if(!o)throw new Error("Product with ID ".concat(t," not found in cart details."));!function(t,e){t.forEach((function(t){var n=c(t);if(Number(e.id)===Number(n)){var o=t.querySelector("salla-product-options"),r=t.querySelector("salla-quantity-input");o&&o.setOptionsData(e.options,!1),r&&r.setValue(e.quantity,!1)}}))}(e,o)})).then((function(){return l()})).catch((function(t){console.error("Error restoring cart item state:",t),l()}))}(n,t)})))}},{key:"initSubmitCart",value:function(){var t=document.querySelector("#cart-submit"),e=document.querySelectorAll('form[id^="item-"]');t&&app.onClick(t,(function(t){var n=!0;if(e.forEach((function(e){if(!(n=n&&e.reportValidity()))return t.preventDefault(),void salla.notify.error(salla.lang.get("common.messages.required_fields"))})),n){var o=t.currentTarget;"guest"==salla.config.get("user.type")?salla.cart.submit():o.load().then((function(){return salla.cart.submit()}))}}))}},{key:"updateCartOptions",value:function(t){var e;if(t&&t.length){var n=t.map((function(t){return t.id}));null===(e=document.querySelectorAll(".cart-options form"))||void 0===e||e.forEach((function(t){n.includes(parseInt(t.id.value))||t.remove()}))}}},{key:"updateCartPageInfo",value:function(t){var e,n,o,r,a=this;if(!t.count)return null===(r=document.querySelector(".cart-options"))||void 0===r||r.remove(),window.location.reload();if(app.toggleElementClassIf(app.cartGifting,"active","hidden",(function(){return t.gift.enabled})),null===(e=app.sallaGifting)||void 0===e||e.toggleAttribute("physical-products","physical"===t.gift.type),null===(n=app.sallaGifting)||void 0===n||n.toggleAttribute("digital-products","digital"===t.gift.type),this.updateCartOptions(null==t?void 0:t.options),null===(o=t.items)||void 0===o||o.forEach((function(t){return a.updateItemInfo(t)})),app.subTotal.innerHTML=salla.money(t.sub_total),app.taxAmount&&(app.taxAmount.innerHTML=salla.money(t.tax_amount)),app.orderOptionsTotal&&(app.orderOptionsTotal.innerHTML=salla.money(t.options_total)),app.toggleElementClassIf(app.totalDiscount,"discounted","hidden",(function(){return!!t.total_discount})).toggleElementClassIf(app.shippingCost,"has_shipping","hidden",(function(){return!!t.real_shipping_cost})).toggleElementClassIf(app.freeShipping,"has_free","hidden",(function(){return!!t.free_shipping_bar})),app.totalDiscount.querySelector("b").innerHTML="- "+salla.money(t.total_discount),app.shippingCost.querySelector("b").innerHTML=salla.money(t.real_shipping_cost),t.free_shipping_bar){var i=t.free_shipping_bar.has_free_shipping;app.toggleElementClassIf(app.freeShippingBar,"active","hidden",(function(){return!i})).toggleElementClassIf(app.freeShipApplied,"active","hidden",(function(){return i})),app.freeShippingMsg.innerHTML=i?salla.lang.get("pages.cart.has_free_shipping"):salla.lang.get("pages.cart.free_shipping_alert",{amount:salla.money(t.free_shipping_bar.remaining)}),app.freeShippingBar.children[0].style.width=t.free_shipping_bar.percent+"%"}}},{key:"updateItemInfo",value:function(t){var e,n,o=document.querySelector("#item-"+t.id);if(o){var r=o.querySelector(".item-total"),a=o.querySelector(".item-price"),i=o.querySelector(".item-regular-price"),l=o.querySelector(".offer-name"),c=o.querySelector(".free-ribon"),u=o.querySelector(".offer-icon"),p=t.offer||t.special_price>0,s=(null===(e=t.detailed_offers)||void 0===e?void 0:e.length)>0||t.special_price>0,d=(null===(n=t.detailed_offers)||void 0===n?void 0:n.length)>0?t.total_special_price:t.total,f=salla.money(d);f!==r.innerHTML&&(r.innerHTML=f,app.anime(r,{scale:[.88,1]})),app.toggleElementClassIf(l,"offer-applied","hidden",(function(){return p})).toggleElementClassIf(u,"offer-applied","hidden",(function(){return p})).toggleElementClassIf(i,"offer-applied","hidden",(function(){return p})).toggleElementClassIf(a,"text-red-400","text-sm text-gray-400",(function(){return p})).toggleElementClassIf(c,"active","hidden",(function(){return 0==t.price})),a.innerHTML=salla.money(t.price),p&&(s||(l.innerHTML=t.offer.names),i.innerHTML=salla.money(t.product_price),function(t){var e=t.detailed_offers,n=document.getElementById("offers_list_".concat(t.id));if(n&&null!=e&&e.length){var o="offers_".concat(t.id),r=e.slice(0,3),a=e.slice(3),i="";r.forEach((function(e){i+=function(t,e){return"\n    ".concat(function(t,e){var n=e.quantity||0,o=t.free_quantity||0,r=n-o;if(o<=0||r<=0)return"";var a=salla.money(e.product_price);return'\n    <div class="font-medium mb-2 space-y-1 text-gray-700">\n      \x3c!-- Paid items --\x3e\n      <div class="text-start">\n        '.concat(salla.helpers.number(r)," Ã— ").concat(a,'\n      </div>\n\n      \x3c!-- Free items --\x3e\n      <div class="text-start">\n        ').concat(salla.helpers.number(o),' Ã— \n        <span class="text-sm text-gray-500 line-through item-regular-price">\n          ').concat(a,'\n        </span>\n        <span class="mx-2 text-sm text-red-800">\n          ').concat(salla.lang.get("common.elements.freeExclam"),"\n        </span>\n      </div>\n    </div>\n  ")}(t,e),' \n    <div class="mt-4 text-green-600 flex items-start gap-2.5">\n      <i class="').concat(t.discount_icon,' font-bold -translate-y-0.5 text-lg"></i>\n      <div>\n        <p class="text-sm font-medium">\n          ').concat(salla.lang.get("pages.checkout.received_offer",{offer:t.offer_name}),'\n        </p>\n        <p class="text-xs text-gray-400 font-small">   \n          ').concat(t.offer_message,'\n        </p>\n        <p class="text-xs mt-1 text-gray-400">\n          ').concat(salla.lang.get("pages.checkout.discount_amount",{amount:salla.money(t.discount_amount)}),"\n        </p>\n      </div>\n    </div> \n  ")}(e,t)})),a.length&&(i+='\n        <div class="mt-4">\n          <button class="group btn--collapse text-sm !bg-transparent !px-0 !justify-start hover:text-dark"\n                  type="button"\n                  data-show="'.concat(o,'">\n            <i class="sicon-discount is-opened rtl:ml-1.5 ltr:mr-1.5"></i>\n            <span class="flex items-center">\n              +').concat(a.length," ").concat(salla.lang.get("pages.checkout.show_more_offers"),' \n              <i class="transition-transform duration-300 group-[.is-opened]:-rotate-180 mx-0.5 sicon-keyboard_arrow_down"></i>\n            </span>\n          </button>\n        </div>\n        <div class="h-0 overflow-hidden opacity-0 is-closed" id="').concat(o,'">\n          ').concat(a.map(this.renderOfferItem(offer,t)).join(""),"\n        </div>\n      ")),n.innerHTML=i,window.app.initiateCollapse()}else n.innerHTML=""}(t))}else salla.log("Can't get the cart item dom for ".concat(t.id,"!"))}},{key:"initiateCoupon",value:function(){var t=this;app.couponCodeInput&&(app.onKeyUp(app.couponCodeInput,(function(t){13===t.keyCode&&app.couponBtn.click(),app.couponError.value="",app.removeClass(app.couponCodeInput,"has-error")})),app.onClick(app.couponBtn,(function(e){var n=app.couponBtn.classList.contains("btn--danger"),o=e.currentTarget;n||app.couponCodeInput.value.length?o.load().then((function(){return n?salla.cart.deleteCoupon():salla.cart.addCoupon(app.couponCodeInput.value)})).then((function(e){return t.toggleCoupon(e,!n)})).catch((function(e){var o;return t.showCouponError(null===(o=e.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.error.message,!n)})).finally((function(){return o.stop()})):t.showCouponError("* "+salla.lang.get("pages.checkout.enter_coupon"))})))}},{key:"toggleCoupon",value:function(t,e){app.couponError.innerText="",app.couponCodeInput.value=e?app.couponCodeInput.value:"",app.couponCodeInput.toggleAttribute("disabled",e),app.toggleElementClassIf(app.couponBtn,["btn--danger","has-coupon"],["btn-default","has-not-coupon"],(function(){return e})).toggleElementClassIf(app.couponBtn,["btn-default","has-not-coupon"],["btn--danger","has-coupon"],(function(){return!e})).hideElement(app.couponBtn.querySelector(e?"span":"i")).showElement(app.couponBtn.querySelector(e?"i":"span")).removeClass(app.couponCodeInput,"has-error")}},{key:"showCouponError",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];app.couponError.innerText=t||salla.lang.get("pages.checkout.error_occurred"),e&&app.addClass(app.couponCodeInput,"has-error")}}])})(n(399).A).initiateWhenReady(["cart"])})(),(()=>{var t=n(29),e=n(901),o=n(822),r=n(954),a=n(501);function i(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(i=function(){return!!t})()}(function(n){function l(){return(0,t.A)(this,l),e=this,n=l,a=arguments,n=(0,r.A)(n),(0,o.A)(e,i()?Reflect.construct(n,a||[],(0,r.A)(e).constructor):n.apply(e,a));var e,n,a}return(0,a.A)(l,n),(0,e.A)(l,[{key:"onReady",value:function(){app.anime(".thanks-item",{translateX:[20,0]});var t=document.querySelector("#invoice-form");salla.order.event.onInvoiceSent((function(e){t.innerHTML=e.data.message,t.classList.add("sent")}))}}])})(n(399).A).initiateWhenReady(["thank-you"])})()})();